# 在宅勤務申請システム 技術スタック提案

## 1. 基本構成

現在のプロジェクト構成を踏襲し、以下の技術スタックを基本とします。

- **バックエンド:** Ruby on Rails
- **フロントエンド:** Next.js (TypeScript)
- **データベース:** MySQL
- **インフラ:** Docker

## 2. バックエンド (Ruby on Rails)

### 2.1. 認証

- **シングルサインオン (SSO):**
  - **`omniauth-saml`**: 多くの企業で採用されている SAML 認証に対応するための Gem。
  - **`devise`**: 基本的な認証機能のフレームワークとして利用。`omniauth` との連携も容易。

### 2.2. 権限管理

- **`Pundit`**:
  - 役割（申請者、承認者、管理者）に基づいた柔軟な権限管理を実装するために利用。シンプルで学習コストが低い点がメリット。

### 2.3. API

- **`rails-api` / `jbuilder` または `ActiveModel::Serializers`**:
  - Next.js との連携のため、JSON API を効率的に構築するために利用。

### 2.4. 外部連携

- **Outlook 連携 (Microsoft Graph API):**
  - **`omniauth-microsoft-graph`**: OAuth 2.0 認証を実装するために利用。
  - **`Faraday`**: Microsoft Graph API へのリクエストを柔軟にハンドリングするための HTTP クライアント。
- **路線情報連携:**
  - **`Faraday`**: 外部の路線情報 API を叩くために利用。
  - **`Sidekiq` / `Redis`**: API からの情報取得をバックグラウンドで定期的に実行するために利用。

### 2.5. その他

- **CSV エクスポート:**
  - **`csv` (Ruby 標準ライブラリ)**: 利用状況の CSV ファイルを生成するために利用。
- **テスト:**
  - **`RSpec`**: 標準の`Minitest`よりも記述性が高く、広く使われているテストフレームワーク。

## 3. フロントエンド (Next.js)

### 3.1. UI コンポーネント

- **`MUI` (Material-UI) または `Chakra UI`**:
  - 直感的で使いやすい UI を効率的に構築するためのコンポーネントライブラリ。デザインの一貫性を保ちやすい。

### 3.2. 状態管理

- **`Recoil` または `Zustand`**:
  - `Redux`よりもシンプルで学習コストが低く、モダンな React の機能（Hooks）と親和性が高い状態管理ライブラリ。

### 3.3. データ取得

- **`SWR` または `React Query`**:
  - バックエンド API からのデータ取得、キャッシュ、再検証を効率的に管理するためのライブラリ。

### 3.4. フォーム管理

- **`React Hook Form`**:
  - パフォーマンスが良く、バリデーションルールも柔軟に設定できるフォーム管理ライブラリ。

### 3.5. カレンダー表示

- **`FullCalendar`**:
  - Outlook 連携で取得した予定や申請状況をカレンダー形式で表示するために利用。多機能でカスタマイズ性が高い。

## 4. データベース

- **`MySQL`**:
  - `docker-compose.yml`で指定されている通り、MySQL 8.0 を使用します。Rails での実績も豊富で、信頼性の高いデータベースです。

## 5. インフラ・開発環境

- **`Docker` / `docker-compose`**:
  - 開発環境の差異をなくし、本番環境へのデプロイを容易にするために利用。

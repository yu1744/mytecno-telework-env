# [プロジェクト名] 開発環境

## 1. はじめに

このリポジトリは、[プロジェクト名] の開発環境を管理するためのものです。
ここにはアプリケーションのコードは含まれず、**フロントエンド**と**バックエンド**の2つのアプリケーションをDockerという技術を使って同時に動かすための設定ファイル (`docker-compose.yml` など) が格納されています。

### 1.1. 開発環境の全体構成

このプロジェクトは、役割の異なる**3つのGitリポジトリ**で構成されています。

1.  **親リポジトリ (このリポジトリ)**
    -   役割: 開発環境全体の設定を管理します。
    -   主なファイル: `docker-compose.yml`, `README.md`
2.  **フロントエンドリポジトリ**
    -   役割: 画面（ユーザーが見る部分）のコードを管理します。(Next.js)
3.  **バックエンドリポジトリ**
    -   役割: 裏側の処理（データ処理など）のコードを管理します。(Ruby on Rails)

開発を始めるには、まずこの親リポジトリをPCにコピーし、その中にフロントエンドとバックエンドのリポジトリを配置します。

### 1.2. ディレクトリ構成

最終的に、あなたのPC上のディレクトリは以下のようになります。

```
(あなたのPCのどこか)/
└── [このリポジトリ名]/      (例: mytecno-dev-env)
    ├── .git/               <- 親リポジトリのGit管理ファイル
    ├── docker-compose.yml  <- 全体を動かすための設計図
    ├── README.md           <- いま見ているこのファイル
    │
    ├── frontend/           <- フロントエンドリポジトリをここに配置
    │   └── .git/           <- フロントエンドのGit管理ファイル
    │
    └── backend/            <- バックエンドリポジトリをここに配置
        └── .git/           <- バックエンドのGit管理ファイル
```

---

## 2. 開発環境のセットアップ手順

### Step 1: 必要なツールをインストールする

-   [Git](https://git-scm.com/book/ja/v2/%E4%BD%BF%E3%81%84%E5%A7%8B%E3%82%81%E3%82%8B-Git%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)
-   [Docker Desktop](https://www.docker.com/products/docker-desktop/)

### Step 2: 3つのリポジトリを準備する

1.  **この親リポジトリをPCにコピー（クローン）します。**
    ターミナル（コマンドプロンプトやPowerShellなど）を開き、作業したいディレクトリに移動してから、以下のコマンドを実行します。
    ```bash
    git clone <この親リポジトリのURL>
    cd <この親リポジトリ名>
    ```

2.  **フロントエンドとバックエンドのリポジトリをクローンします。**
    続けて、今いるディレクトリ (`<この親リポジトリ名>`) の中で、以下のコマンドを実行します。
    ```bash
    git clone <フロントエンドリポジトリのURL> frontend
    git clone <バックエンドリポジトリのURL> backend
    ```
    これにより、`frontend` と `backend` という名前のフォルダが作成され、その中に各アプリケーションのコードが配置されます。

### Step 3: Docker環境を起動する

1.  **Docker Desktopを起動します。**
    PCのアプリケーション一覧からDocker Desktopを探して起動し、クジラのアイコンが動かなくなったら準備完了です。

2.  **Dockerイメージをビルドします。**
    各アプリケーションをDockerコンテナとして動かすための「イメージ」を作成します。初回のみ少し時間がかかります。
    ```bash
    docker-compose build
    ```

3.  **データベースを作成します。**
    バックエンドが使用するデータベースをコンテナ内に作成します。
    ```bash
    docker-compose run --rm backend rails db:create
    ```

4.  **開発環境を起動します。**
    全てのコンテナ（フロントエンド、バックエンド、データベース）を起動します。
    ```bash
    docker-compose up
    ```
    ターミナルにたくさんのログが表示されれば成功です。

### Step 4: 動作を確認する

-   フロントエンド: ブラウザで `http://localhost:3000` にアクセス
-   バックエンド: `http://localhost:3001` (APIなので通常はブラウザで見ても何も表示されません)

---

## 3. Dockerの基本操作

Dockerに慣れていない方向けの基本的な操作説明です。コマンドはすべて親リポジトリのディレクトリで実行します。

-   **起動:** `docker-compose up`
    -   `-d` を付けるとバックグラウンドで起動します: `docker-compose up -d`
-   **停止:**
    -   `docker-compose up` で起動した場合: ターミナルで `Ctrl + C`
    -   バックグラウンドで起動した場合: `docker-compose down`
-   **ビルド (再構築):**
    `Dockerfile` や `Gemfile`, `package.json` などを変更した場合は、イメージの再構築が必要です。
    ```bash
    docker-compose build
    ```
-   **コンテナの状態確認:**
    ```bash
    docker-compose ps
    ```
-   **コンテナの中に入る (デバッグなどで使用):**
    ```bash
    # バックエンドのコンテナに入る場合
    docker-compose exec backend bash
    ```

---

## 4. Git運用ルール (ブランチ戦略)

コードの品質を保ち、チーム開発を円滑に進めるため、以下のルールで運用します。このルールは**フロントエンド**と**バックエンド**の両方のリポジトリで適用されます。

### 基本ブランチ

-   `main` (または `master`)
    -   常に正常に動作する、リリース可能な状態のコードを格納します。
    -   このブランチに直接コミットすることは**禁止**です。
-   `develop`
    -   開発のメインとなるブランチです。
    -   機能開発が完了し、レビューが終わったコードがマージされます。

### 作業ブランチ

-   `feature/`
    -   新しい機能を追加・開発する際に使用します。
    -   `develop` ブランチから作成します。
    -   例: `feature/user-login`
-   `bugfix/`
    -   バグを修正する際に使用します。
    -   `develop` ブランチから作成します。
    -   例: `bugfix/form-validation-error`

### 開発の基本的な流れ

1.  **`develop` ブランチを最新の状態にします。**
    ```bash
    git checkout develop
    git pull origin develop
    ```

2.  **作業ブランチを作成して移動します。**
    ```bash
    # 新機能開発の場合
    git checkout -b feature/your-feature-name
    ```

3.  **コーディングとコミットを行います。**
    作業がキリの良いところまで進んだら、変更内容をコミットします。
    ```bash
    git add .
    git commit -m "feat: ユーザー登録機能を追加"
    ```

4.  **作業ブランチをリモートにプッシュします。**
    ```bash
    git push origin feature/your-feature-name
    ```

5.  **プルリクエストを作成します。**
    GitHubなどのサービス上で、`feature/your-feature-name` ブランチから `develop` ブランチへのプルリクエスト（マージリクエスト）を作成します。

6.  **コードレビューを受けます。**
    チームメンバーにレビューを依頼し、修正があれば対応します。

7.  **`develop` ブランチにマージします。**
    レビューで承認されたら、プルリクエストをマージします。

8.  **不要になった作業ブランチを削除します。**